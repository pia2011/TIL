## TCP/IP는 무엇인가?

데이터 송수신에 관한 일련의 작업을 하나로 모은 것이다. 물론 이련의 작업을 자세히 들여다보면 상당히 많은 공정으로 이루어져 있다.
```
엄밀히는 TCP와 IP라는 프로토콜을 가리키는 말이지만, 일반적으로 인터넷에서 사용되는 통신 프로토콜을 총칭하여 TCP/IP라고 한다.
```

* 데이터를 디지털 신호로 변환
* 보낼 곳에 전달
* 디질털 신호를 데이터로 전환

위의 작업을 효율적으로 수행하기 위해서 TCP/IP에서는 5단계의 절차를 거친다.

각 단계는 계층이라고 하며 다음과 같다.

### TCP/IP 5계층

* 애플리케이션 계층
* 트랜스포트 계층
* 네트워크 계층
* 데이터 링크 계층
* 물리 계층

```
데이터 링크 계층과 물리 계층을 합쳐서 4계층으로 취급하는 경우도 있다.
```

TCP/IP의 특징 중 하나는 데이터를 일정한 크기로 분할해서 보낸다는 것이다. 작게 나뉘어진 데이터 하나하나를 패킷이라고
하며, 이런 통신 방법을 패킷 통신이라고 한다.

```
패킷은 데이터 전송 시에 데이터를 일정한 크기로 잘라 보낼 때 정보의 전송 단위이다.
각 패킷에는 데이터뿐만 아니라 목적지 주소, 제어 부호 등의 제어 정보가 담겨 있다.
```

### 장점
* 데이터를 세분화함으로써 하나의 회선을 사용하여 여러 데이터를 거의 동신에 송수신할 수 있다.
* 통신 중에 데이터의 일부가 손상되어도 해당하는 부분만 다시 보내면 된다.


## 통신 프로토콜

### 프로토콜
데이터를 주고 받으려면 송신측과 수신측의 미리 정해놓은 공통된 메뉴얼에 따라 연락을 취해야 하며 이 메뉴얼을 프로토콜이라고 한다.

```
컴퓨터는 정해진 것 이상의 작업은 할 수 없으므로 주고받기의 순서나 처리에 대한 아주 자세한 부분까지 정해주어야 한다.
```

## TCP/IP란
현재 전세계 공통 통신 프로토콜로 채택된 것이 바로 TCP/IP이다.

하지만 데이터를 주고 받는 데는 여러가지 작업이 필요하므로 TCP/IP는 여러 개의 프로토콜로 이루어져 있다.

## 계층화

### 단계로 나눠서 처리

앞서 말했듯이 TCP/IP에 서는 송수신 관련된 일련의 작업을 몇 개의 단계로 나눠서 수행한다. 
각 단계를 계층이라고 하며, 층으로 나눈 것을 계층화라고한다. 

### TCP/IP 5계층 흐름

흐름은 다음과 같다.

송신측 
* 수신측의 애플리케이션에서 처리할 수 있도록 만든다.
* 네트워크 상에서의 공통된 형태로 만든다.
* 수신처로 가는 경로를 정하고 보낼 수 있는 형태로 만든다.
* 비트열로 변환한다.
* 비트열을 전압의 변화나 빛의 점멸 신호로 변화하여 송신한다.

수신측
* 신호를 비트열로 변환한다.
* 비트열을 데이터로 변환한다.
* 데이터의 수신인을 확인하고 자기 것이 아니면 파기한다. 
* 데이터에 문제가 있다면 재전송을 요청한다.
* 애플리케이션에서 표시, 재생한다.

## TCP/IP의 구조

### 각 층의 역할과 프로토콜

TCP/IP는 5개의 계층으로 나눠져 있는데 위로 갈 수록사용자와 가까운 작업을 수행하며, 아래로 갈 수록 기계와 가까운 작업을 담당한다.
각 계층에는 다양한 프로토콜이 준비하고 있으며 TCP와 IP도 그 중 하나이다.

* 애플리케이션 계층 : 애플리케이션에 맞춰 통신을 수행할 수 있도록 한다.

EX) HTTP, SMTP, POP3, FTP, TELNET, NNTP, TCP
* 트랜스포트 계층 : 송신된 데이터를 수신측 애플리케이션에 확실히 전달하기 위해 작동한다.

EX) TCP, UDP
* 네트워크 계층 : 수신측 컴퓨터까지 데이터를 전달하기 위해 작동한다.

EX) IP
* 데이터 링크 계층 : 네트워크에 직접 연결된 기기 간을 전송할 수 있도록 만든다.

EX) Ethernet, FDDI, ATM, PPP, PPPoE
* 물리 계층 : 데이터를 신호로 신호를 데이터로 변환한다. 변환 방법은 통신 매체에 의존하기 떄문에 특정 프로토콜이 정해져 있지 않다.


일반적으로 TCP/IP라고 하면 이 5계층 전체를 가리키지만, TCP와 IP라는 두 개의 프로토콜만 카리키는 경우도 있기 때문에 
그것과 구별하기 위해서 TCP/IP 프로토콜군(protocol family)

### 프로토콜 조합하기

프로토콜 조합을 바꿈으로써 다양한 애플리케이션이나 기기를 처리할 수 있다. 예를 들어 전자메일 송신의 경우 SMTP와 TCP, IP르 조합해서 쓰면되고,
수신이라면 POP3와 TCP,IP를 조합하면 된다. 이렇게 무엇을 할 것인지에 따라서 사용할 프로토콜의 조합이 달라지게 된다.

## 계층간 연락 방법

### 필요한 정보 추가하기

송신측의 각 계층에서는 수신측의 동일한 계층에서 필요한 정보를 공통된 서식으로 데이터에 추가해 간다. 추가하는 데이터는 다음과 같다.
* 헤더 : 데이터 보다 앞에 추가한 정보 
* 트레일러 : 데이터 보다 뒤에 추가한 정보

![image](https://user-images.githubusercontent.com/53935439/154602885-ed058079-35e2-42f6-b7e8-bb7dde191e3e.png)

```
이렇게 데이터와 정보를 하나로 묶어서 다루는 것을 캡슐화라고 한다.
```

### 헤더와 계층화의 관계

송신측의 각 계층에서 추가된 헤더와 트레일러는 수신측의 동일한 계층에서만 사용된다. 따라서 다음과 같이 서로 동의한 계층끼리만 연락을 취하고 있는 것처럼 보인다.

![image](https://user-images.githubusercontent.com/53935439/154603002-3e850533-6cf5-4004-8c78-2ea60d2167de.png)

상위 계층에서 추가된 헤더는 캡슐화되어 있으므로 다은 계층에서는 볼 수 없다.

## 계층으로 보는 데이터 송수신

### 송신측

* 애플리케이션 계층 : 애플리케이션 간에 데이터를 주고받기 위해 필요한 정보를 써 넣는다.
* 트랜스포트 계층 : 애플리케이션을 나타내는 번호와 데이터를 조합하기 위한 정보를 써 넣는다.
* 네트워크 계층 : 송수신함 컴퓨터 주소와 수신 불명인 경우 데이터를 파기하는 표시 등을 써 넣는다.
* 데이터 링크 계층 : 네트워크의 종류에 맞춘 형식으로 보낼 곳의 정보 등을 써 넣는다.

### 수신측

* 데이터 링크 계층 : 헤더에 적힌 정보를 확인하고 지정된 프로토콜에게 전달한다.
* 네트워크 계층 : 헤더에 적힌 목적지가 맞는지 확인하고 지정된 프로토콜에게 전달한다.
* 트랜트포트 계층 : 헤더를 확인하고 데이터를 순서대로 나열해서 조합한다. 데이터에 문제가 있으면 파그에 따른 처리를 한다.
* 애플리케이션 계층 : 지정된 애플리케이션에게 전달한다.

## 패킷

### 패킷 통신

TCP/IP에서는 데이터를 일정한 크기로 분할해서 송수신하는 패킷 교환이라는 방법으로 주고받기를 수행한다. 
이러한 통신 방법을 패킷 통신이라고 한다. 과정은 다음과 같다.

송신측에서 데이터를 패킷으로 나누고 각 패킷에 목적지나 원래대로 되돌리기 위한 번호등을 써넣는다. 이후 회선을 사용하여 데이터를 송신하면
하나의 회선으로 여러 개의 데이터를 거의 동시에 주고받을 수 있다. 

수신측에서는 자기 앞으로 온 데이터만 받고 만일 손상되어 있으면 해당 패킷만 다시 받는다. 이후 데이터를 원래대로 되돌린다.

어떤 데이터든지 이와 같이 주고받을 수 있다.

## 간단한 문제들

1. 통신에서 사용하기 위해 작게 나뉘어진 데이터는?
2. TCP/IP의 5 계층을 위에서부터 순서대로 나열해보시오.
3. 데이터를 주고 받기 위해 송신측과 수신측의 컴퓨터가 미리 정해놓은 공통된 약속을 무엇인가?
4. TCP/IP의 각 계층에 해당하는 프로토콜을 바르게 찾아서 쓰시오.
```
<보기> 
Ethernet, TCP, HTTP, SMTP, POP3, IP, FTP, TELNET, PPP, UDP
```




